<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Continuous Integration with CircleCI | 河雄大's Blog</title><meta name="description"><meta name="generator" content="河雄大's Blog"><meta name="author" content="Jun Kawa"><meta name="keywords" content="front end, design, developer"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/source-kawa-blog/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><a href="/source-kawa-blog/"><img src="/source-kawa-blog/images/svdb.png" alt="河雄大's Blog" title="河雄大's Blog"></a><h1><a href="/source-kawa-blog/" alt="河雄大's Blog" title="河雄大's Blog" itemprop="headline">河雄大's Blog</a></h1><p itemprop="description">Home for all of my projects</p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="Home" title="Home" itemprop="url" class="home-link">Home</a></li><li itemprop="name"><a href="/articles" alt="Articles" title="Articles" itemprop="url" class="home-link">Articles</a></li><li itemprop="name"><a href="/about" alt="About" title="About" itemprop="url" class="home-link">About</a></li></ul></nav><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">Continuous Integration with CircleCI</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2018-10-17T22:04:07.000Z"> Wednesday, October 17th 2018 at 22:04</time><br>Last updated on<time itemprop="dateModified" datetime="2018-10-17T22:04:07.000Z"> Friday, November 2nd 2018 at 6:38</time></span><p>This post will be a tutorial on how to build your own static website using <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>, <a href="https://circleci.com/" target="_blank" rel="noopener">CircleCI</a>, and <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a>.</p>
<h2 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h2><hr>
<h5 id="Install-Dependencies"><a href="#Install-Dependencies" class="headerlink" title="Install Dependencies"></a>Install Dependencies</h5><p>Make sure to download and install:</p>
<ol>
<li><a href="https://git-scm.com/" target="_blank" rel="noopener">git</a></li>
<li><a href="https://nodejs.org/en/" target="_blank" rel="noopener">node v8.x.x</a></li>
<li><a href="https://nodejs.org/en/" target="_blank" rel="noopener">npm v6.x.x</a> *<em>npm is installed with node</em></li>
<li><a href="https://www.sublimetext.com/" target="_blank" rel="noopener">Any Text Editor</a> *<em>Sublime is a free text editor</em></li>
</ol>
<p>You can check to see if you have them installed by running this command in your terminal:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>
<h5 id="Create-a-GitHub-account"><a href="#Create-a-GitHub-account" class="headerlink" title="Create a GitHub account"></a>Create a GitHub account</h5><p>One of the best places to host your static website for free is GitHub Pages. In order to utilize that, you will first need to have a GitHub account.<br>Site: <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a></p>
<h5 id="Create-Repo"><a href="#Create-Repo" class="headerlink" title="Create Repo"></a>Create Repo</h5><p>Create a new repository on <a href="https://github.com/new" target="_blank" rel="noopener">GitHub</a>. The name of the repository can be anything. Initially, there will be nothing inside the repo, but we will start adding to it later on.</p>
<h5 id="Create-Hexo-Project"><a href="#Create-Hexo-Project" class="headerlink" title="Create Hexo Project"></a>Create Hexo Project</h5><p>Open your terminal and run the command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init [name-of-your-website] <span class="comment">#No brackets</span></span><br><span class="line"><span class="built_in">cd</span> [name-of-your-website]</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<p>Go to your browser and enter <code>http://localhost:4000/</code>. You should be able to see your website running locally.</p>
<p>In order to safely stop the local server, just hit ctrl+c twice.</p>
<h5 id="Hooking-Up-Your-Project-to-GitHub"><a href="#Hooking-Up-Your-Project-to-GitHub" class="headerlink" title="Hooking Up Your Project to GitHub"></a>Hooking Up Your Project to GitHub</h5><p>mindplace created instructions on hooking your project in detail if this one is too vague: <a href="https://gist.github.com/mindplace/b4b094157d7a3be6afd2c96370d39fad" target="_blank" rel="noopener">link</a>.<br>Your project isn’t on GitHub yet since it was newly created and git hasn’t been initialized. First step to hooking it up is to run the command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>
<p>Now copy the HTTPS link from your repo on GitHub. It should be a green button labeled “Clone or download”. The link should look something like this: <code>https://github.com/username/repo-name.git</code>. Now commit and push your project by running the commands:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin [copied link] <span class="comment">#No brackets</span></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<p>GitHub will probably ask for credentials after trying to push your changes to GitHub.</p>
<p>If everything turned out successful, all of your project files should now be in your repo on GitHub.</p>
<p>We also need to create a separate branch to hold all the generated files the project will create when building the static website.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b gh-pages</span><br><span class="line">git rm -rf .</span><br><span class="line">git push origin gh-pages</span><br></pre></td></tr></table></figure>
<p>You can close your terminal.</p>
<h5 id="Setting-Up-CircleCI"><a href="#Setting-Up-CircleCI" class="headerlink" title="Setting Up CircleCI"></a>Setting Up CircleCI</h5><p>We finally can setup the continuous integration portion of the project. This will allow your projects to be deployed to github pages automatically whenever you push your changes. You can change settings around to your preference like to make it deploy on certain circumstances.</p>
<p>Go to CircleCI’s website and sign up for a free account with your GitHub account. After signing in, click on <code>Add Projects</code> located on the left sidebar, find your project in the list, and click on the <code>Sign Up Project</code> button. It should take you to a new page (don’t worry about anything on this page) and just click on the <code>Start Building</code> button. That’s it for this portion, but we still need to add some configurations so CircleCI knows what you want it to do.</p>
<h5 id="Configuring-CircleCI"><a href="#Configuring-CircleCI" class="headerlink" title="Configuring CircleCI"></a>Configuring CircleCI</h5><p>We have to let CircleCI know what our GitHub email and username are and to do that, go to <code>Environmental Variables</code> and create two variables.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name: GH_EMAIL</span><br><span class="line">Value: [your-github-email] #No brackets</span><br><span class="line">Name: GH_NAME</span><br><span class="line">Value: [your-github-username] #No brackets</span><br></pre></td></tr></table></figure></p>
<p>Go back to your project on GitHub and click on the <code>Create new file</code> button. Type in <code>.circleci/config.yml</code> for the name and copy/paste the code below into the body:</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="number">2</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line"><span class="attr">  build:</span></span><br><span class="line"><span class="attr">    branches:</span></span><br><span class="line"><span class="attr">      ignore:</span> <span class="string">gh-pages</span> </span><br><span class="line"><span class="attr">    docker:</span></span><br><span class="line"><span class="attr">      - image:</span> <span class="string">circleci/node:8</span></span><br><span class="line"><span class="attr">    environment:</span></span><br><span class="line"><span class="attr">      - SOURCE_BRANCH:</span> <span class="string">master</span></span><br><span class="line"><span class="attr">      - TARGET_BRANCH:</span> <span class="string">gh-pages</span></span><br><span class="line"><span class="attr">    steps:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">checkout</span></span><br><span class="line"><span class="attr">      - run:</span></span><br><span class="line"><span class="attr">          name:</span> <span class="string">Install</span> <span class="string">Hexo</span></span><br><span class="line"><span class="attr">          command:</span> <span class="string">sudo</span> <span class="string">npm</span> <span class="string">install</span> <span class="bullet">-g</span> <span class="string">hexo-cli</span></span><br><span class="line"><span class="attr">      - restore_cache:</span></span><br><span class="line"><span class="attr">          keys:</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">v1-dependencies-&#123;&#123;</span> <span class="string">checksum</span> <span class="string">"package.json"</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">v1-dependencies-</span></span><br><span class="line"><span class="attr">      - run:</span></span><br><span class="line"><span class="attr">          name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line"><span class="attr">          command:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"><span class="attr">      - save_cache:</span></span><br><span class="line"><span class="attr">          paths:</span></span><br><span class="line"><span class="bullet">            -</span> <span class="string">node_modules</span></span><br><span class="line"><span class="attr">          key:</span> <span class="string">v1-dependencies-&#123;&#123;</span> <span class="string">checksum</span> <span class="string">"package.json"</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">      - run:</span></span><br><span class="line"><span class="attr">          name:</span> <span class="string">Generate</span> <span class="string">static</span> <span class="string">website</span></span><br><span class="line"><span class="attr">          command:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            hexo clean</span></span><br><span class="line"><span class="string">            hexo generate</span></span><br><span class="line"><span class="string">            git config --global user.email $GH_EMAIL</span></span><br><span class="line"><span class="string">            git config --global user.name $GH_NAME</span></span><br><span class="line"><span class="string">            hexo deploy</span></span><br></pre></td></tr></table></figure>
<p>Save the file by clicking on <code>Commit changes</code> button.</p>
<h5 id="Configuring-Hexo"><a href="#Configuring-Hexo" class="headerlink" title="Configuring Hexo"></a>Configuring Hexo</h5><p>Time to start up Sublime and open your project up (File &gt; Open Folder). This will display the whole project tree of your files on the left sidebar. Navigate and open up <em>_config.yml</em> for editing.</p>
<p>You can change the Site information settings to your liking.</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">[site</span> <span class="string">title]</span> <span class="comment">#No brackets</span></span><br><span class="line"><span class="attr">subtitle:</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">[description]</span> <span class="comment">#No brackets</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">[your</span> <span class="string">name]</span> <span class="comment">#No brackets</span></span><br><span class="line"><span class="attr">language:</span></span><br><span class="line"><span class="attr">timezone:</span></span><br></pre></td></tr></table></figure>
<p>Fill in the github pages url so Hexo knows what the base url will be.</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">[website-url]</span> <span class="comment">#No brackets #Example: https://username.github.io/project-name/</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">[root-url]</span> <span class="comment">#No brackets #Example: /project-name/</span></span><br></pre></td></tr></table></figure>
<p>The last important portion is the deployment settings. This will let Hexo know which repository your project will deploy to.</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">  repo:</span> <span class="string">[repo-link]</span> <span class="comment">#No brackets #https://github.com/username/repo-name.git</span></span><br><span class="line"><span class="attr">  branch:</span> <span class="string">gh-pages</span></span><br><span class="line"><span class="attr">  message:</span> <span class="string">|</span></span><br><span class="line"><span class="string">    Site updated: <span class="template-variable">&#123;&#123; now('YYYY-MM-DD') &#125;&#125;</span> [ci skip] #[ci skip] will let CircleCI know not to touch this branch</span></span><br></pre></td></tr></table></figure>
<p>For GitHub to know your newly made changes, you have to open the terminal, change directory to the root of your project, and run the command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit -a -m <span class="string">"updated _config.yml"</span></span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<p>GitHub will probably ask for credentials after trying to push your changes to GitHub.</p>
</article></main></body></html>